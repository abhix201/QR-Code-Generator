<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Generate QR codes instantly for URLs, text, phone numbers, and more. Free, fast, and easy-to-use QR code generator with modern design.">
    <meta name="keywords" content="QR code generator, QR code, generator, URL to QR, text to QR, free QR generator">
    <meta name="author" content="Abhijeet Gupta">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="QR Code Generator - Create QR Codes Instantly">
    <meta property="og:description" content="Generate QR codes instantly for URLs, text, phone numbers, and more. Free, fast, and easy-to-use.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://abhijeet-gupta-portfolio.appwrite.network/">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="QR Code Generator">
    <meta name="twitter:description" content="Generate QR codes instantly for URLs, text, phone numbers, and more.">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3Eüì±%3C/text%3E%3C/svg%3E">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3Eüì±%3C/text%3E%3C/svg%3E">
    
    <!-- Cache busting for CSS and JS -->
    <link rel="stylesheet" href="styles.css?v=2.0.1">
    
    <!-- Force cache clear -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>QR Code Generator - Create QR Codes Instantly</title>
</head>

<body>
    <div class="background-animation"></div>
    
    <header class="header">
        <div class="container">
            <h1 class="logo">
                <span class="logo-icon">üì±</span>
                QR Generator
            </h1>
            <p class="tagline">Create beautiful QR codes in seconds</p>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <div class="generator-card">
                <div class="card-header">
                    <h2>Generate Your QR Code</h2>
                    <p>Enter any text, URL, phone number, or message below</p>
                </div>
                
                <form class="qr-form" novalidate>
                    <div class="input-group">
                        <label for="qr-input" class="sr-only">Enter text or URL for QR code</label>
                        <div class="input-wrapper">
                            <input 
                                id="qr-input" 
                                type="text" 
                                autocomplete="off" 
                                placeholder="Enter URL, text, phone number, or any message..."
                                aria-describedby="input-help error-message"
                                required
                            >
                            <button type="button" class="clear-btn" id="clear-btn" aria-label="Clear input">
                                <span>‚úï</span>
                            </button>
                        </div>
                        <div id="input-help" class="input-help">
                            üí° Try: URLs, phone numbers (+1234567890), email addresses, or plain text
                        </div>
                        <div id="error-message" class="error-message" role="alert" aria-live="polite"></div>
                        
                        <!-- Debug and cache clear button -->
                        <button type="button" id="debug-btn" style="margin-top: 10px; padding: 5px 10px; background: #ff6b6b; color: white; border: none; border-radius: 4px; font-size: 12px;">
                            üîß Debug & Clear Cache
                        </button>
                    </div>
                    
                    <div class="options-group">
                        <h3>Customize Your QR Code</h3>
                        <div class="options-grid">
                            <div class="option">
                                <label for="size-select">Size</label>
                                <select id="size-select">
                                    <option value="200">Small (200√ó200)</option>
                                    <option value="300" selected>Medium (300√ó300)</option>
                                    <option value="400">Large (400√ó400)</option>
                                    <option value="500">Extra Large (500√ó500)</option>
                                    <option value="600">Huge (600√ó600)</option>
                                </select>
                            </div>
                            
                            <div class="option">
                                <label for="error-correction">Error Correction</label>
                                <select id="error-correction">
                                    <option value="low">Low (~7%)</option>
                                    <option value="medium" selected>Medium (~15%)</option>
                                    <option value="quartile">Quartile (~25%)</option>
                                    <option value="high">High (~30%)</option>
                                </select>
                            </div>
                            
                            <div class="option">
                                <label for="foreground-color">QR Color</label>
                                <input type="color" id="foreground-color" value="#000000">
                            </div>
                            
                            <div class="option">
                                <label for="background-color">Background</label>
                                <input type="color" id="background-color" value="#ffffff">
                            </div>
                            
                            <div class="option">
                                <label for="margin-size">Margin</label>
                                <select id="margin-size">
                                    <option value="1">Minimal</option>
                                    <option value="2">Small</option>
                                    <option value="4" selected>Medium</option>
                                    <option value="6">Large</option>
                                    <option value="8">Extra Large</option>
                                </select>
                            </div>
                            
                            <div class="option">
                                <label for="style-select">Style</label>
                                <select id="style-select">
                                    <option value="square" selected>Square</option>
                                    <option value="rounded">Rounded</option>
                                    <option value="dots">Dots</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit" class="generate-btn" id="generate-btn">
                        <span class="btn-text">Generate QR Code</span>
                        <span class="btn-icon">üöÄ</span>
                    </button>
                </form>
                
                <div class="loading-spinner" id="loading-spinner">
                    <div class="spinner"></div>
                    <p>Generating your QR code...</p>
                </div>
                
                <div class="result-section" id="result-section">
                    <div class="qr-display">
                        <img id="qr-image" alt="Generated QR Code" />
                        <div class="qr-overlay">
                            <button class="preview-btn" id="preview-btn" aria-label="Preview QR Code">
                                üîç Preview
                            </button>
                        </div>
                    </div>
                    
                    <div class="qr-info">
                        <h3>Your QR Code is Ready!</h3>
                        <p id="qr-data-preview">Scan this code to access your content</p>
                        
                        <div class="action-buttons">
                            <button class="download-btn" id="download-btn">
                                <span>üì• Download</span>
                            </button>
                            <button class="share-btn" id="share-btn">
                                <span>üì§ Share</span>
                            </button>
                            <button class="copy-btn" id="copy-btn">
                                <span>üìã Copy Link</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="success-message" id="success-message">
                    <span class="success-icon">‚úÖ</span>
                    <span class="success-text">QR Code generated successfully!</span>
                </div>
            </div>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üöÄ</div>
                    <h3>Instant Generation</h3>
                    <p>Create QR codes in seconds with our lightning-fast generator</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üé®</div>
                    <h3>Customizable</h3>
                    <p>Choose from multiple sizes, formats, and error correction levels</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üì±</div>
                    <h3>Mobile Friendly</h3>
                    <p>Works perfectly on all devices - desktop, tablet, and mobile</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üîí</div>
                    <h3>Privacy Focused</h3>
                    <p>Your data is processed securely and never stored on our servers</p>
                </div>
            </div>
        </div>
    </main>
    
    <div class="modal" id="preview-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>QR Code Preview</h3>
                <button class="modal-close" id="modal-close" aria-label="Close preview">
                    ‚úï
                </button>
            </div>
            <div class="modal-body">
                <img id="modal-qr-image" alt="QR Code Preview" />
            </div>
        </div>
        <div class="modal-backdrop" id="modal-backdrop"></div>
    </div>
    
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 QR Code Generator. Made with ‚ù§Ô∏è by <a href="https://abhijeet-gupta-portfolio.appwrite.network/" target="_blank" rel="noopener">Abhijeet Gupta</a></p>
        </div>
    </footer>
    
    <!-- QR Code Generation Library - Load first with fallback -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js" 
            onerror="loadQRCodeFallback()"></script>
    
    <script>
        // Fallback CDN loader
        function loadQRCodeFallback() {
            console.warn('Primary CDN failed, trying fallback...');
            const script = document.createElement('script');
            script.src = 'https://unpkg.com/qrcode@1.5.3/build/qrcode.min.js';
            script.onerror = () => {
                console.error('All CDNs failed!');
                alert('Unable to load QR Code library. Please check your internet connection and try again.');
            };
            document.head.appendChild(script);
        }
        
        // Function to check if QRCode library is loaded
        function waitForQRCode() {
            return new Promise((resolve, reject) => {
                let attempts = 0;
                const maxAttempts = 50; // 5 seconds max wait
                
                function check() {
                    attempts++;
                    if (typeof QRCode !== 'undefined') {
                        console.log('QRCode library loaded successfully');
                        resolve();
                    } else if (attempts >= maxAttempts) {
                        console.error('QRCode library failed to load after 5 seconds');
                        reject(new Error('QRCode library failed to load'));
                    } else {
                        console.log('Waiting for QRCode library... attempt', attempts);
                        setTimeout(check, 100);
                    }
                }
                check();
            });
        }

        // Initialize app only after QRCode is ready
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                console.log('DOM loaded, waiting for QRCode library...');
                await waitForQRCode();
                
                // Clear cache
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.getRegistrations().then(function(registrations) {
                        for(let registration of registrations) {
                            registration.unregister();
                        }
                    });
                }
                
                if ('caches' in window) {
                    caches.keys().then(function(names) {
                        for (let name of names) {
                            caches.delete(name);
                        }
                    });
                }
                
                window.APP_VERSION = '2.0.1';
                
                // Now initialize the QR Generator
                console.log('Initializing QR Code Generator...');
                new QRCodeGenerator();
            } catch (error) {
                console.error('Failed to initialize app:', error);
                alert('Failed to load QR Code library. Please check your internet connection and refresh the page.');
            }
        });
    </script>
    
    <!-- Main JavaScript - Load after library check -->
    <script src="index.js?v=2.0.1"></script>
</body>

</html>
